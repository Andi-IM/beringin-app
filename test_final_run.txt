node.exe : PASS src/domain/policies/scheduler.policy.test.ts
At line:1 char:1
+ & "C:\nvm4w\nodejs/node.exe" "C:\nvm4w\nodejs/node_modules/npm/bin/np ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (PASS src/domain....policy.test.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  AdaptiveSchedulerPolicy
    calculateNextInterval
      Incorrect Answers
        ΓêÜ should reset to minimum interval for incorrect answer (9 ms)
        ΓêÜ should set status to lapsed when previous interval was stable (1 ms)
        ΓêÜ should not allow ease factor below minimum (1 ms)
        ΓêÜ should handle incorrect answer with different confidence levels (3 ms)
      Correct Answers with High Confidence
        ΓêÜ should increase interval and ease factor for high confidence correct answer (2 ms)
        ΓêÜ should set status to stable when interval exceeds threshold (1 ms)
        ΓêÜ should handle very small intervals (1 ms)
      Correct Answers with Low Confidence
        ΓêÜ should increase interval modestly for low confidence correct answer (10 ms)
        ΓêÜ should not allow ease factor below minimum for low confidence (4 ms)
        ΓêÜ should handle low confidence with large previous interval (2 ms)
      Correct Answers with No Confidence (Guessed)
        ΓêÜ should decrease interval for guessed correct answer (2 ms)
        ΓêÜ should not allow ease factor below minimum for guessed answer (1 ms)
        ΓêÜ should handle very small intervals for guessed answers (2 ms)
      Edge Cases
        ΓêÜ should handle maximum ease factor correctly (1 ms)
        ΓêÜ should handle zero previous interval (1 ms)
        ΓêÜ should handle negative confidence scenarios gracefully (1 ms)
        ΓêÜ should maintain consistent behavior across multiple correct high confidence answers (10 ms)
        ΓêÜ should handle consecutive incorrect answers (2 ms)
      Status Progression Logic
        ΓêÜ should follow correct status progression for new user (1 ms)
        ΓêÜ should handle fragile to learning transition

PASS src/application/usecases/getNextQuestion.usecase.test.ts
  getNextQuestion Use Case
    ΓêÜ should return the first due question when questions are available (21 ms)
    ΓêÜ should return null when no due questions are available (2 ms)
    ΓêÜ should handle single due question correctly (2 ms)
    ΓêÜ should handle different question types (2 ms)
    ΓêÜ should call repository with correct userId (2 ms)
    ΓêÜ should return correct total count regardless of question returned (2 ms)

PASS src/application/usecases/getConceptStatus.usecase.test.ts
  getConceptStatus Use Case
    ΓêÜ should return concepts and stats for user (17 ms)
    ΓêÜ should return empty stats for user with no concepts (3 ms)
    ΓêÜ should correctly count lapsed concepts (2 ms)
    ΓêÜ should handle concepts with different statuses correctly (1 ms)
    ΓêÜ should call repository with correct userId (1 ms)

PASS src/domain/entities/question.entity.test.ts
  Question Entity
    Question Type
      ΓêÜ should create a valid text question (12 ms)
      ΓêÜ should create a valid voice question (1 ms)
      ΓêÜ should create a valid cloze question (1 ms)
    QuestionWithAnswer Type
      ΓêÜ should create a question with complete answer information (2 ms)
      ΓêÜ should create a question without optional answer fields (2 ms)
      ΓêÜ should create a question with incorrect answer (1 ms)
    QuestionType Type
      ΓêÜ should accept all valid question types (1 ms)

PASS src/infrastructure/repositories/seed.test.ts
  seedData
    ΓêÜ should create concepts successfully (26 ms)
    ΓêÜ should create questions for each concept (3 ms)
    ΓêÜ should create initial progress for demo-user (5 ms)
    ΓêÜ should create progress with nextReview set to current time (3 ms)
    ΓêÜ should log success message (2 ms)
    ΓêÜ should create concepts with proper structure (8 ms)
    ΓêÜ should create questions with proper structure (7 ms)
    ΓêÜ should create progress with proper structure (6 ms)
    ΓêÜ should handle seeding data multiple times (4 ms)
    ΓêÜ should maintain referential integrity between concepts and questions (4 ms)
    ΓêÜ should maintain referential integrity between concepts and progress (15 ms)

PASS src/infrastructure/repositories/in-memory-question.repository.test.ts
  InMemoryQuestionRepository
    findById
      ΓêÜ should return null when question is not found (34 ms)
      ΓêÜ should return question when found (2 ms)
    findByConceptId
      ΓêÜ should return empty array for non-existent concept (1 ms)
      ΓêÜ should return questions for specific concept (2 ms)
    findDueQuestions
      ΓêÜ should return empty array when no due questions (1 ms)
      ΓêÜ should return questions that are due for review (4 ms)
      ΓêÜ should return empty array for user with no progress (1 ms)
    create
      ΓêÜ should create question with generated id and timestamps (3 ms)
      ΓêÜ should create different question types (1 ms)
    update
      ΓêÜ should throw error when question not found (50 ms)
      ΓêÜ should update question and set new updatedAt timestamp (42 ms)
    delete
      ΓêÜ should not throw error when deleting non-existent question (2 ms)
      ΓêÜ should delete existing question (1 ms)

PASS src/infrastructure/repositories/in-memory-progress.repository.test.ts
  InMemoryProgressRepository
    findByUserAndConcept
      ΓêÜ should return null when progress not found (27 ms)
      ΓêÜ should return progress when found (3 ms)
      ΓêÜ should return null when user does not match (4 ms)
      ΓêÜ should return null when concept does not match (1 ms)
    findByUserId
      ΓêÜ should return empty array for non-existent user (1 ms)
      ΓêÜ should return all progress for specific user (2 ms)
    create
      ΓêÜ should create progress with generated timestamps (3 ms)
      ΓêÜ should create progress with empty history (2 ms)
    update
      ΓêÜ should throw error when progress not found (33 ms)
      ΓêÜ should update progress and set new updatedAt timestamp (15 ms)
      ΓêÜ should update progress history
    delete
      ΓêÜ should not throw error when deleting non-existent progress (1 ms)
      ΓêÜ should delete existing progress (1 ms)
    Integration with other user progress
      ΓêÜ should not affect other users progress (1 ms)
      ΓêÜ should not affect other concepts progress for same user (1 ms)

PASS src/domain/entities/user-progress.entity.test.ts
  UserProgress Entity
    ProgressHistory Type
      ΓêÜ should create a valid progress history entry (7 ms)
      ΓêÜ should create a progress history entry with incorrect result (12 ms)
      ΓêÜ should create a progress history entry with no confidence (1 ms)
    UserProgress Type
      ΓêÜ should create a valid user progress entry (2 ms)
      ΓêÜ should create a user progress entry with empty history (2 ms)
      ΓêÜ should create a user progress entry with stable status (1 ms)
    Status Integration
      ΓêÜ should work with all concept statuses (1 ms)

PASS src/domain/entities/concept.entity.test.ts
  Concept Entity
    Concept Type
      ΓêÜ should create a valid concept (2 ms)
      ΓêÜ should create a concept with optional parentId (1 ms)
      ΓêÜ should create a concept without parentId (1 ms)
    ConceptWithStatus Type
      ΓêÜ should create a concept with full status information (1 ms)
      ΓêÜ should create a concept without optional review fields (2 ms)
    ConceptStatus Type
      ΓêÜ should accept all valid concept statuses (2 ms)

PASS src/application/usecases/submitAnswer.usecase.test.ts
  submitAnswer Use Case
    ΓêÜ should create new progress for first-time user (4 ms)
    ΓêÜ should update existing progress for returning user (4 ms)
    ΓêÜ should handle correct answer with high confidence (11 ms)
    ΓêÜ should handle incorrect answer with low confidence (2 ms)
    ΓêÜ should calculate next review date correctly (3 ms)
    ΓêÜ should append to existing history (7 ms)
    ΓêÜ should handle none confidence (2 ms)

  console.error
    In HTML, <html> cannot be a child of <div>.
    This will cause a hydration error.

    [0m [90m 11 |[39m describe([32m'RootLayout'[39m[33m,[39m () [33m=>[39m {
     [90m 12 |[39m   it([32m'renders with correct HTML structure'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 13 |[39m     [36mconst[39m { container } [33m=[39m render(
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 14 |[39m       [33m<[39m[33mRootLayout[39m[33m>[39m
     [90m 15 |[39m         [33m<[39m[33mdiv[39m[33m>[39m[33mTest[39m [33mChildren[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
     [90m 16 |[39m       [33m<[39m[33m/[39m[33mRootLayout[39m[33m>[39m[33m,[39m[0m

      at validateDOMNesting (node_modules/react-dom/cjs/react-dom-client.development.js:2598:19)
      at resolveSingletonInstance (node_modules/react-dom/cjs/react-dom-client.development.js:22598:9)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:12525:29)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17777:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17658:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16504:11)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:46:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:189:26)
      at render (node_modules/@testing-library/react/dist/pure.js:291:10)
      at Object.<anonymous> (src/app/layout.test.tsx:13:33)

PASS src/infrastructure/repositories/in-memory.repository.test.ts
  InMemoryConceptRepository
    findById
      ΓêÜ should return null when concept is not found (1 ms)
      ΓêÜ should return concept when found (1 ms)
    findAll
      ΓêÜ should return empty array when no concepts exist (1 ms)
      ΓêÜ should return all concepts (2 ms)
    findByCategory
      ΓêÜ should return empty array for non-existent category (1 ms)
      ΓêÜ should return concepts in specified category (1 ms)
    create
      ΓêÜ should create concept with generated id and timestamps (6 ms)
    update
      ΓêÜ should throw error when concept not found (13 ms)
      ΓêÜ should update concept and set new updatedAt timestamp (14 ms)
    delete
      ΓêÜ should not throw error when deleting non-existent concept (1 ms)
      ΓêÜ should delete existing concept (1 ms)

PASS src/app/layout.test.tsx
  RootLayout
    ΓêÜ renders with correct HTML structure (120 ms)
    ΓêÜ applies correct font variable class (8 ms)
    ΓêÜ renders children content (15 ms)
    ΓêÜ handles multiple children (5 ms)
    ΓêÜ handles complex children structure (6 ms)
    ΓêÜ has correct metadata export (1 ms)

  console.error
    An update to DashboardPage inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 26 |[39m   [36masync[39m [36mfunction[39m loadDashboard() {
     [90m 27 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [33mRegistry[39m[33m.[39mgetDashboardData(userId)
    [31m[1m>[22m[39m[90m 28 |[39m     setConcepts(result[33m.[39mconcepts)
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 29 |[39m     setStats(result[33m.[39mstats)
     [90m 30 |[39m   }
     [90m 31 |[39m[0m

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setConcepts (src/app/dashboard/page.tsx:28:5)

  console.error
    An update to DashboardPage inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 27 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [33mRegistry[39m[33m.[39mgetDashboardData(userId)
     [90m 28 |[39m     setConcepts(result[33m.[39mconcepts)
    [31m[1m>[22m[39m[90m 29 |[39m     setStats(result[33m.[39mstats)
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   }
     [90m 31 |[39m
     [90m 32 |[39m   [36mfunction[39m getStatusColor(status[33m:[39m string) {[0m

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setStats (src/app/dashboard/page.tsx:29:5)

  console.error
    An update to DashboardPage inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 26 |[39m   [36masync[39m [36mfunction[39m loadDashboard() {
     [90m 27 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [33mRegistry[39m[33m.[39mgetDashboardData(userId)
    [31m[1m>[22m[39m[90m 28 |[39m     setConcepts(result[33m.[39mconcepts)
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 29 |[39m     setStats(result[33m.[39mstats)
     [90m 30 |[39m   }
     [90m 31 |[39m[0m

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setConcepts (src/app/dashboard/page.tsx:28:5)

  console.error
    An update to DashboardPage inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 27 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m [33mRegistry[39m[33m.[39mgetDashboardData(userId)
     [90m 28 |[39m     setConcepts(result[33m.[39mconcepts)
    [31m[1m>[22m[39m[90m 29 |[39m     setStats(result[33m.[39mstats)
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   }
     [90m 31 |[39m
     [90m 32 |[39m   [36mfunction[39m getStatusColor(status[33m:[39m string) {[0m

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setStats (src/app/dashboard/page.tsx:29:5)

PASS src/app/page.test.tsx
  HomePage
    ΓêÜ renders the main title and tagline (49 ms)
    ΓêÜ renders navigation buttons (11 ms)
    ΓêÜ seeds data on first load when not previously seeded (5 ms)
    ΓêÜ does not seed data when already seeded (3 ms)
    ΓêÜ handles localStorage gracefully when not available (4 ms)
    ΓêÜ sets seeded flag after seeding data (3 ms)
    ΓêÜ has correct styling classes (48 ms)

PASS src/app/dashboard/page.test.tsx
  DashboardPage
    ΓêÜ renders dashboard title and subtitle (127 ms)
    ΓêÜ calls Registry.getDashboardData on mount (19 ms)
    ΓêÜ displays stats correctly (55 ms)
    ΓêÜ displays concept list when concepts exist (35 ms)
    ΓêÜ displays category tags (15 ms)
    ΓêÜ displays next review date when available (31 ms)
    ΓêÜ shows empty state when no concepts exist (16 ms)
    ΓêÜ renders action buttons (16 ms)
    ΓêÜ applies correct status colors and labels (15 ms)
    ΓêÜ handles different status types correctly (16 ms)
    ΓêÜ formats review date correctly for Indonesian locale (9 ms)
    ΓêÜ handles loading state gracefully (3 ms)

PASS src/app/session/page.test.tsx
  SessionPage
    ΓêÜ renders session page with question (80 ms)
    ΓêÜ renders completion state when no questions available (8 ms)
    ΓêÜ allows user to type answer (271 ms)
    ΓêÜ shows answer section when user clicks show answer (95 ms)
    ΓêÜ allows user to select correctness (200 ms)
    ΓêÜ allows user to select confidence level (263 ms)
    ΓêÜ enables submit button only when correctness and confidence are selected (279 ms)
    ΓêÜ submits answer and loads next question (293 ms)
    ΓêÜ handles empty answer correctly (93 ms)
    ΓêÜ calculates response time correctly (232 ms)
    ΓêÜ handles different question types (46 ms)
    ΓêÜ handles submit when no correctness selected (219 ms)
    ΓêÜ handles submit when no confidence selected (202 ms)

Test Suites: 15 passed, 15 total
Tests:       146 passed, 146 total
Snapshots:   0 total
Time:        5.201 s
Ran all test suites.
